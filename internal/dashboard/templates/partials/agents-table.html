{{define "partials/agents-table.html"}}
{{range .}}
<tr>
  <td>{{statusIcon (print .Status.Phase)}}</td>
  <td><a href="/agents/{{.Name}}">{{.Name}}</a></td>
  <td><code>{{.Spec.Guardrails.Autonomy}}</code></td>
  <td>
    {{if .Spec.Schedule.Cron}}{{.Spec.Schedule.Cron}}{{end}}
    {{if .Spec.Schedule.Interval}}{{.Spec.Schedule.Interval}}{{end}}
  </td>
  <td>{{.Status.RunCount}}</td>
  <td>{{.Status.ConsecutiveFailures}}</td>
  <td>{{if .Status.LastRunTime}}{{timeAgo .Status.LastRunTime.Time}}{{else}}never{{end}}</td>
</tr>
{{else}}
<tr><td colspan="7" class="empty">No agents configured</td></tr>
{{end}}
{{end}}
